# ==============================================================================
# ðŸš¨ PILOT STRATEGY CONFIGURATION (å®žç›˜è¯•ç‚¹é…ç½®)
# ------------------------------------------------------------------------------
# âš ï¸ WARNING: æ­¤é…ç½®ç›´æŽ¥æŽ§åˆ¶å®žç›˜èµ„é‡‘ã€‚
# æ‰€æœ‰çš„é£ŽæŽ§å‚æ•°å¿…é¡»æ˜¯æ˜¾å¼çš„æ•°å€¼ (Explicit Numbers)ï¼Œä¸¥ç¦ä½¿ç”¨æ¨¡ç³Šçš„æ ‡ç­¾ã€‚
# ==============================================================================

gateway:
  # ä½¿ç”¨çŽ¯å¢ƒå˜é‡æ³¨å…¥ï¼Œå¦‚æžœæœªè®¾ç½®åˆ™å›žé€€åˆ°é»˜è®¤å€¼ (æœ¬åœ°å¼€å‘æˆ– Docker å†…éƒ¨)
  # ç”Ÿäº§çŽ¯å¢ƒ IP: 172.19.141.255
  zmq_url: "${MT5_ZMQ_URL:-tcp://172.19.141.255:5555}"
  pub_url: "${MT5_PUB_URL:-tcp://172.19.141.255:5556}"
  timeout: 5000
  retry_attempts: 3

strategies:
  # Strategy 1: EURUSD Production (Validated & Active)
  - name: "EURUSD_Production_V1"
    active: true
    symbols: ["EURUSD"]
    timeframe: "H1"

    # 1. æ˜¾å¼æ¨¡åž‹ç»‘å®š (Model Binding)
    model:
      type: "xgboost"
      # EURUSDæ¨¡åž‹å·²éªŒè¯ï¼Œå¯ç”¨äºŽå®žç›˜äº¤æ˜“
      path: "models/deep_v1.json"
      min_confidence: 0.6

    # 2. æ˜¾å¼ç¡¬æ€§é£ŽæŽ§ (Hard Risk Limits)
    risk:
      profile: "conservative"
      max_lot_size: 0.01
      stop_loss_pips: 20
      max_daily_loss_usd: 50.0
      max_leverage: 30

    logging:
      level: "INFO"
      log_file: "/app/logs/eurusd_production.log"

  # Strategy 2: GBPUSD Validation (Passive Mode - Task #012)
  - name: "GBPUSD_Validation_V1"
    active: true
    passive_mode: true  # ðŸ›¡ï¸ Log-only, NO TRADES until validation complete
    symbols: ["GBPUSD"]
    timeframe: "H1"

    # 1. æ¨¡åž‹é…ç½® (ä½¿ç”¨EURUSDæ¨¡åž‹è¿›è¡ŒéªŒè¯)
    model:
      type: "xgboost"
      # âš ï¸ WARNING: This model was trained on EURUSD only
      # Distribution shift validation required before going live
      path: "models/deep_v1.json"
      min_confidence: 0.6

    # 2. é£ŽæŽ§å‚æ•° (ä¸ŽEURUSDç›¸åŒï¼Œç”¨äºŽéªŒè¯é˜¶æ®µ)
    risk:
      profile: "conservative"
      max_lot_size: 0.01
      stop_loss_pips: 20
      max_daily_loss_usd: 50.0
      max_leverage: 30

    # 3. éªŒè¯è¦æ±‚ (Task #012)
    validation:
      require_explicit_approval: true
      min_observation_hours: 24
      validation_script: "scripts/verify_market_data.py --symbol GBPUSD --baseline EURUSD"
      approval_criteria:
        - "DQ Score > 85"
        - "No significant distribution shift (p-value > 0.05)"
        - "Average signal confidence > 0.6"
        - "At least 10 signals in 24 hours"

    logging:
      level: "INFO"
      log_file: "/app/logs/gbpusd_validation.log"

metadata:
  version: "1.2.0"
  last_updated: "2026-01-02"
  approved_by: "AI_Architect_Gemini"
  task: "TASK_012"
  changes:
    - "Split EURUSD and GBPUSD into separate strategies"
    - "Added passive_mode for GBPUSD validation"
    - "Updated EURUSD to use deep_v1.json model"
    - "Added validation criteria for GBPUSD go-live decision"
