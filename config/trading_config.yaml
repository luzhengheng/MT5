common:
  env_name: production_v1
  log_level: INFO
  session_id: MT5-CRS-TASK132

gateway:
  # ZMQ 连接配置 (已修正为 .251)
  zmq_req_host: "172.19.141.251"
  zmq_req_port: 5555
  zmq_pub_host: "172.19.141.251"
  zmq_pub_port: 5556
  # 并发与超时
  timeout_ms: 5000
  retry_attempts: 3
  heartbeat_interval: 5
  concurrent_symbols: true
  zmq_lock_enabled: true
  concurrent_request_delay_ms: 100

logging:
  level: INFO
  log_file: logs/trading_live.log
  retention_days: 30
  rotation: daily

market_data:
  buffer_interval: 60
  data_sources:
    - description: "MT5 Realtime"
      enabled: true
      type: mt5_realtime
  timeframes:
    - 1H
    - 4H
    - 1D

risk:
  # Legacy risk parameters (kept for backward compatibility)
  max_leverage: 3000
  max_per_symbol: 1.0
  max_per_symbol_risk: 20.0
  max_slippage_usd: 50
  max_total_exposure: 2.0
  risk_percentage: 0.5

  # RFC-135: Dynamic Risk Management System
  enabled: true
  fail_safe_mode: true

  # L1: Circuit Breaker Configuration
  circuit_breaker:
    max_consecutive_losses: 3
    max_loss_amount: 1000
    max_loss_percentage: 2
    cooldown_seconds: 300
    half_open_max_trades: 2
    half_open_success_threshold: 2
    max_trips_per_day: 3
    escalation_multiplier: 2.0

  # L2: Drawdown Monitoring
  drawdown:
    warning_threshold: 3
    critical_threshold: 5
    halt_threshold: 7
    max_daily_loss: 5000
    recovery_threshold: 2
    reduce_only_on_critical: true
    halt_on_threshold: true

  # L3: Exposure Monitoring
  exposure:
    max_total_exposure: 100
    max_single_position: 20
    max_correlated_exposure: 40
    max_positions: 20
    max_positions_per_symbol: 1
    max_sector_exposure: 30
    warning_threshold: 80

  # Track-specific limits (3-Track System)
  track_limits:
    EUR:
      max_exposure_pct: 30
      max_positions: 5
      max_single_position_pct: 10
      max_daily_loss_pct: 2
    BTC:
      max_exposure_pct: 40
      max_positions: 7
      max_single_position_pct: 15
      max_daily_loss_pct: 3
    GBP:
      max_exposure_pct: 30
      max_positions: 5
      max_single_position_pct: 10
      max_daily_loss_pct: 2

symbols:
  - symbol: "EURUSD.s"
    active: true
    magic_number: 202600
    lot_size: 0.01
    risk_profile: conservative_fx
    
  - symbol: "BTCUSD.s"
    active: true
    magic_number: 202601
    lot_size: 0.001
    risk_profile: conservative_crypto

  - symbol: "GBPUSD.s"
    active: true
    magic_number: 202602
    lot_size: 0.01
    risk_profile: conservative_fx

  - symbol: "ETHUSD.s"
    active: false
    magic_number: 202603
    lot_size: 0.01

  - symbol: "XAUUSD.s"
    active: false
    magic_number: 202604
    lot_size: 0.01

trading_hours:
  mode: 24/7
  timezone: UTC
