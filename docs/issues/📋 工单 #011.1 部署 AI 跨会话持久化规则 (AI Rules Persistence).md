ğŸ“‹ å·¥å• #011.1: éƒ¨ç½² AI è·¨ä¼šè¯æŒä¹…åŒ–è§„åˆ™ (AI Rules Persistence)  
ä¼˜å…ˆçº§: P0 (æœ€é«˜ - åŸºç¡€è®¾æ–½)  
ç±»å‹: Infrastructure / DevOps  
ä¾èµ–: å·¥å• #010.9 (Notion Nexus)  
æŒ‡æ´¾: Claude (Internal AI)  
çŠ¶æ€: å¾…æ‰§è¡Œ  
ğŸ¯ ç›®æ ‡  
å°† Git-Notion è‡ªåŠ¨åŒ–åŒæ­¥çš„è§„åˆ™â€œä»£ç åŒ–â€å¹¶å›ºåŒ–åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚è¿™å°†ç¡®ä¿æ— è®ºæ˜¯ä½¿ç”¨ Cursor (è‡ªåŠ¨è¯»å–) è¿˜æ˜¯ Claude Code CLI (æ‰‹åŠ¨è¯»å–)ï¼ŒAI éƒ½èƒ½ç¬é—´è¿›å…¥â€œDevOps ä»£ç†æ¨¡å¼â€ï¼Œæ‰§è¡Œæ ‡å‡†åŒ–çš„ä»£ç åŒæ­¥æ“ä½œï¼Œæ— éœ€é‡å¤è®­ç»ƒã€‚  
ğŸ› ï¸ å®æ–½ä»»åŠ¡æ¸…å•  
1. åˆ›å»º .cursorrules (è‡ªåŠ¨åŒ–è§„åˆ™)  
ç”¨é€”: ä¸“ä¸º Cursor ç¼–è¾‘å™¨è®¾è®¡ã€‚Cursor ä¼šè‡ªåŠ¨è¯»å–æ­¤æ–‡ä»¶ä½œä¸º System Promptã€‚  
ä½ç½®: /opt/mt5-crs/.cursorrules  
2. åˆ›å»º AI_RULES.md (é€šç”¨è§„åˆ™)  
ç”¨é€”: ä¸“ä¸º Claude Code (CLI) æˆ– Web ç‰ˆè®¾è®¡ã€‚ä½œä¸ºé¡¹ç›®çš„â€œå®ªæ³•â€æ–‡ä»¶ã€‚  
ä½ç½®: /opt/mt5-crs/AI_RULES.md  
3. ç‰ˆæœ¬æ§åˆ¶åŒæ­¥  
åŠ¨ä½œ: å°†æ–°æ–‡ä»¶æäº¤åˆ° Gitï¼Œç¡®ä¿è§„åˆ™è·Ÿéšä»£ç åº“åˆ†å‘ã€‚  
ğŸ“„ äº¤ä»˜ç‰©å®šä¹‰ (Artifact Definitions)  
æ–‡ä»¶ A: .cursorrules å†…å®¹  
# ğŸ¤– Cursor System Rules: MT5-CRS DevOps Mode  
  
You are the AI DevOps Engineer for the MT5-CRS project.  
When the user provides short commands like "commit", "sync", "fix", or "save", you MUST strictly follow the GIT-NOTION SYNC protocol below.  
  
## 1. ğŸš€ Git-Notion Sync Protocol  
To ensure Notion tickets are automatically updated via Git Hooks, every commit MUST follow this format:  
  
`type(scope): description #issue-id`  
  
- **Type**: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`  
- **Scope**: `mt5`, `strategy`, `risk`, `docs`, `infra`  
- **Issue ID**: Crucial! Must include the active issue ID (e.g., `#011`).  
  
## 2. âš¡ Auto-Execution Template  
When asked to sync/commit, DO NOT CHAT. IMMEDIATELY generate and execute this shell block:  
  
```bash  
# 1. Status Check  
git status  
  
# 2. Stage All  
git add .  
  
# 3. Commit (Apply logic to generate the message)  
# Example: git commit -m "fix(mt5): fix retry logic in connection pool #011"  
git commit -m "[TYPE]([SCOPE]): [DESCRIPTION] #[ISSUE_ID]"  
  
# 4. Push (Triggers Notion Hook)  
git push  
  
# 5. Verify  
echo "âœ… Pushed to GitHub. Notion Issue #[ISSUE_ID] should be updated."  
  
3. ğŸ§  Context Awareness  
 * Always prioritize Project Stability (Live Trading) over new features.  
 * If editing risk_manager.py, DOUBLE CHECK the logic for KellySizer and CircuitBreaker.  
<!-- end list -->  
  
### æ–‡ä»¶ B: `AI_RULES.md` å†…å®¹  
```markdown  
# ğŸ¤– MT5-CRS AI è¡Œä¸ºå‡†åˆ™ä¸æ“ä½œæ‰‹å†Œ  
  
## 1. èº«ä»½è®¾å®š  
ä½ æ˜¯ MT5-CRS é¡¹ç›®çš„èµ„æ·±é‡åŒ–å¼€å‘ä¸ DevOps å·¥ç¨‹å¸ˆã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ååŠ©ç”¨æˆ·å®Œæˆä»å›æµ‹åˆ°å®ç›˜çš„è¿‡æ¸¡ï¼Œå¹¶ç»´æŠ¤ä»£ç åº“çš„æ•´æ´ä¸æ–‡æ¡£åŒæ­¥ã€‚  
  
## 2. æ ¸å¿ƒæŒ‡ä»¤ï¼šåŒæ­¥æ¨¡å¼ (Sync Mode)  
å½“ç”¨æˆ·è¦æ±‚æäº¤ä»£ç ã€åŒæ­¥çŠ¶æ€æˆ–ä¿®å¤ Bug æ—¶ï¼Œè¯·ä¸¥æ ¼æ‰§è¡Œä»¥ä¸‹æ ‡å‡†åŒ–æµç¨‹ï¼Œ**æ— éœ€ç”¨æˆ·æä¾›å®Œæ•´å‘½ä»¤**ï¼š  
  
### æäº¤ä¿¡æ¯è§„èŒƒ  
æ ¼å¼: `type(scope): description #issue-id`  
* **å¿…é¡»åŒ…å«**: `type` (å¦‚ feat/fix), `scope` (å¦‚ mt5/risk), å’Œ `#issue-id` (å¦‚ #011)ã€‚  
* **ç¦æ­¢**: æäº¤ä¸å¸¦å·¥å•å·çš„ä»£ç ã€‚  
  
### è‡ªåŠ¨åŒ–æ‰§è¡Œæ¨¡ç‰ˆ  
è¯·ç›´æ¥ç”Ÿæˆå¹¶è¿è¡Œä»¥ä¸‹ Shell å‘½ä»¤å—ï¼š  
  
```bash  
git status  
git add .  
git commit -m "ä½ çš„æ ‡å‡†åŒ–æäº¤ä¿¡æ¯ #å·¥å•å·"  
git push  
echo "âœ… åŒæ­¥å®Œæˆ"  
  
3. å¸¸ç”¨å·¥å•ç´¢å¼•  
 * #011: MT5 å®ç›˜äº¤æ˜“ç³»ç»Ÿå¯¹æ¥ (å½“å‰ç„¦ç‚¹)  
 * #010: å›æµ‹ç³»ç»Ÿ  
 * #009: æœºå™¨å­¦ä¹ æ¨¡å‹  
4. å¯åŠ¨æ£€æŸ¥æ¸…å•  
æ¯æ¬¡ä¼šè¯å¼€å§‹æ—¶ï¼Œè¯·ç¡®è®¤ï¼š  
 * å½“å‰å·¥ä½œçš„å·¥å•å·æ˜¯å¤šå°‘ï¼Ÿ  
 * æ˜¯å¦éœ€è¦è¯»å– src/mt5/ ä¸‹çš„æœ€æ–°ä»£ç ï¼Ÿ  
<!-- end list -->  
  
---  
  
## ğŸš€ æ‰§è¡ŒæŒ‡ä»¤ (ç›´æ¥å‘ç»™ Claude)  
  
è¯·å¤åˆ¶ä»¥ä¸‹ Prompt å‘é€ç»™ Claude ä»¥æ‰§è¡Œéƒ¨ç½²ï¼š  
  
```text  
è¯·æ‰§è¡Œå·¥å• #011.1ï¼šéƒ¨ç½² AI è·¨ä¼šè¯æŒä¹…åŒ–è§„åˆ™ã€‚  
  
è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š  
  
1. **åˆ›å»º `.cursorrules` æ–‡ä»¶**ï¼š  
   - ä½ç½®ï¼šé¡¹ç›®æ ¹ç›®å½•  
   - å†…å®¹ï¼šä½¿ç”¨å·¥å•æè¿°ä¸­çš„ "æ–‡ä»¶ A" å†…å®¹ã€‚  
  
2. **åˆ›å»º `AI_RULES.md` æ–‡ä»¶**ï¼š  
   - ä½ç½®ï¼šé¡¹ç›®æ ¹ç›®å½•  
   - å†…å®¹ï¼šä½¿ç”¨å·¥å•æè¿°ä¸­çš„ "æ–‡ä»¶ B" å†…å®¹ã€‚  
  
3. **æ‰§è¡Œ Git åŒæ­¥**ï¼š  
   - ä½¿ç”¨ä½ æ–°å­¦åˆ°çš„ DevOps è§„åˆ™æ‰§è¡Œæäº¤ã€‚  
   - æäº¤ä¿¡æ¯ï¼š`chore(infra): éƒ¨ç½² AI è§„åˆ™æ–‡ä»¶ä»¥å›ºåŒ– DevOps å·¥ä½œæµ #011`  
   - æ¨é€ä»£ç ã€‚  
  
4. **ç¡®è®¤**ï¼š  
   - ç¡®è®¤æ–‡ä»¶å·²åˆ›å»ºã€‚  
   - ç¡®è®¤æˆ‘ä¸‹æ¬¡ä½¿ç”¨ Claude Code æ—¶ï¼Œåªéœ€è¾“å…¥ `/read AI_RULES.md` å³å¯æ¿€æ´» DevOps æ¨¡å¼ã€‚  
  
