# 工作区重命名影响分析报告

## 📊 分析结论

**建议：谨慎评估后决定是否重命名**

## 🔍 发现的路径引用

### 1. **Cron 任务配置**（高风险）
- **文件**：`/var/spool/cron/root` 或 `/etc/crontab`
- **影响**：定时任务会失败
- **当前配置**：`0 2 * * * /root/M t 5-CRS/scripts/deploy/pull_eodhd_daily.sh`

### 2. **脚本内部路径**（中等风险）
- **文件**：`scripts/deploy/pull_eodhd_daily.sh`
- **行号**：第2行
- **内容**：`cd /root/M t 5-CRS`

### 3. **文档和配置**（低风险）
- **README.md**：多处路径引用
- **部署日志**：历史记录中的路径
- **配置文档**：示例路径

### 4. **其他潜在影响**
- **Git 远程仓库**：如果有 webhook 或集成配置
- **Docker 挂载**：如果使用了 Docker 容器
- **日志文件路径**：可能影响日志轮转配置

## 🛠️ 重命名方案

### 方案A：直接重命名目录
```bash
# 停止相关服务
sudo systemctl stop actions-runner.service

# 重命名目录
cd /root
mv M t 5-CRS MT5

# 更新所有引用
# ... 需要手动更新所有硬编码路径
```

### 方案B：符号链接过渡
```bash
# 创建符号链接保持兼容性
cd /root
mv M t 5-CRS MT5
ln -s MT5 M t 5-CRS

# 逐步迁移引用
```

## ⚠️ 风险评估

| 风险等级 | 问题 | 影响程度 | 恢复难度 |
|---------|------|----------|----------|
| 高 | Cron 任务失效 | 数据拉取中断 | 中等 |
| 中 | 脚本执行失败 | 部署功能异常 | 低 |
| 低 | 文档不一致 | 混淆用户 | 低 |
| 中 | 服务重启失败 | Runner 离线 | 中等 |

## ✅ 推荐做法

### 立即可行方案：
1. **保持现状**：当前命名虽不完美但功能正常
2. **渐进式重命名**：
   - 先更新脚本中的相对路径
   - 然后重命名目录
   - 最后更新 cron 任务

### 长期建议：
- 使用配置文件管理路径，避免硬编码
- 建立路径变量系统
- 定期检查和更新路径引用

## 🎯 决策建议

**如果必须重命名**：
- 在维护窗口执行
- 先备份所有配置
- 分步骤执行，有回滚方案

**如果可以接受现状**：
- 保持 `M t 5-CRS` 命名
- 建立文档说明命名规则
- 重点解决路径硬编码问题

## 📝 后续行动项

1. [ ] 评估业务影响程度
2. [ ] 制定详细迁移计划
3. [ ] 准备回滚方案
4. [ ] 执行重命名或确认保持现状