# MT5 Hub é’‰é’‰å‘Šè­¦è§„åˆ™è®¾è®¡æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»ç»“åˆå·¥ä½œåŒºéƒ¨ç½²æˆ˜ç•¥è®¾è®¡çš„é’‰é’‰å‘Šè­¦è§„åˆ™ä½“ç³»ï¼Œå®ç°ä¸‰å°æœåŠ¡å™¨çš„å…¨é¢ç›‘æ§ä¸æ™ºèƒ½å‘Šè­¦ã€‚

## æˆ˜ç•¥èƒŒæ™¯

### å·¥ä½œåŒºæ¶æ„
- **ä¸­æ¢æœåŠ¡å™¨ (MT5 Hub)**: 47.84.1.161 - å¼€å‘ã€ç›‘æ§ã€æ•°æ®ã€CI/CD
- **è®­ç»ƒæœåŠ¡å™¨**: 8.138.100.136 - GPUè®­ç»ƒã€æ¨¡å‹ä¼˜åŒ–
- **æ¨ç†æœåŠ¡å™¨**: 47.84.111.158 - å®æ—¶æ¨ç†ã€ç”Ÿäº§æœåŠ¡

### éƒ¨ç½²æˆ˜ç•¥é˜¶æ®µ
1. **é˜¶æ®µ1**: ä¸­æ¢æœåŠ¡å¹³å°å®Œå–„ï¼ˆå½“å‰ï¼‰
2. **é˜¶æ®µ2**: è®­ç»ƒæœåŠ¡å™¨ä¼˜åŒ–
3. **é˜¶æ®µ3**: æ¨ç†æœåŠ¡å™¨ç”Ÿäº§å°±ç»ª
4. **é˜¶æ®µ4**: å…¨é“¾è·¯ååŒä¸è‡ªåŠ¨åŒ–
5. **é˜¶æ®µ5**: æˆæœ¬ä¸ç¨³å®šæ€§ä¼˜åŒ–

## å‘Šè­¦è§„åˆ™ä½“ç³»è®¾è®¡

### 1. å‘Šè­¦åˆ†å±‚æ¶æ„

#### åŸºç¡€è®¾æ–½å±‚ (Infrastructure)
- **ç‰©ç†èµ„æº**: CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ
- **ç³»ç»ŸæœåŠ¡**: OSã€å®¹å™¨ã€ç½‘ç»œæœåŠ¡
- **ç¡¬ä»¶çŠ¶æ€**: GPUã€å­˜å‚¨è®¾å¤‡

#### æœåŠ¡å±‚ (Service)
- **æ ¸å¿ƒæœåŠ¡**: Grafanaã€Prometheusã€Runner
- **ä¸šåŠ¡æœåŠ¡**: æ•°æ®æ‹‰å–ã€æ¨¡å‹è®­ç»ƒã€æ¨ç†API
- **ä¸­é—´ä»¶**: æ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—

#### ä¸šåŠ¡å±‚ (Business)
- **KPIæŒ‡æ ‡**: Sharpeæ¯”ç‡ã€èƒœç‡ã€æ”¶ç›Š
- **è´¨é‡æŒ‡æ ‡**: å‡†ç¡®ç‡ã€å»¶è¿Ÿã€å¯ç”¨æ€§
- **æˆæœ¬æŒ‡æ ‡**: äº‘èµ„æºè´¹ç”¨ã€é¢„ç®—æ§åˆ¶

### 2. å‘Šè­¦è§„åˆ™åˆ†ç±»

#### æŒ‰æœåŠ¡å™¨ç»´åº¦

| å‘Šè­¦ç»„ | æœåŠ¡å™¨ | ä¸»è¦ç›‘æ§å†…å®¹ | å‘Šè­¦çº§åˆ« |
|--------|--------|--------------|----------|
| hub_server_alerts | ä¸­æ¢æœåŠ¡å™¨ | ç³»ç»Ÿèµ„æºã€æœåŠ¡å¯ç”¨æ€§ã€æ•°æ®æœåŠ¡ | è­¦å‘Š/ä¸¥é‡ |
| training_server_alerts | è®­ç»ƒæœåŠ¡å™¨ | GPUçŠ¶æ€ã€è®­ç»ƒè¿›åº¦ã€æ¨¡å‹å­˜å‚¨ | ä¸¥é‡/è­¦å‘Š |
| inference_server_alerts | æ¨ç†æœåŠ¡å™¨ | å“åº”å»¶è¿Ÿã€æœåŠ¡å¯ç”¨æ€§ã€é”™è¯¯ç‡ | ä¸¥é‡/è­¦å‘Š |

#### æŒ‰éƒ¨ç½²é˜¶æ®µ

| é˜¶æ®µ | é‡ç‚¹ç›‘æ§ | å‘Šè­¦é˜ˆå€¼ | å“åº”ç­–ç•¥ |
|------|----------|----------|----------|
| é˜¶æ®µ1 | ä¸­æ¢ç¨³å®šæ€§ | æ ‡å‡†é˜ˆå€¼ | ç«‹å³å“åº” |
| é˜¶æ®µ2 | è®­ç»ƒæ•ˆç‡ | é«˜é˜ˆå€¼ | è®¡åˆ’å“åº” |
| é˜¶æ®µ3 | æ¨ç†è´¨é‡ | ä¸¥æ ¼é˜ˆå€¼ | ç´§æ€¥å“åº” |
| é˜¶æ®µ4 | ç³»ç»ŸååŒ | ä¸šåŠ¡æŒ‡æ ‡ | ååŒå¤„ç† |
| é˜¶æ®µ5 | æˆæœ¬æ§åˆ¶ | é¢„ç®—é˜ˆå€¼ | ä¼˜åŒ–è°ƒæ•´ |

### 3. æ ¸å¿ƒå‘Šè­¦è§„åˆ™è¯¦æƒ…

#### ä¸­æ¢æœåŠ¡å™¨å‘Šè­¦è§„åˆ™

```yaml
# ç³»ç»Ÿèµ„æºç›‘æ§
- alert: HubHighCPUUsage
  expr: CPUä½¿ç”¨ç‡ > 85%
  for: 5åˆ†é’Ÿ
  severity: warning
  description: å½±å“å¼€å‘å’Œç›‘æ§æœåŠ¡

- alert: HubHighMemoryUsage
  expr: å†…å­˜ä½¿ç”¨ç‡ > 90%
  for: 3åˆ†é’Ÿ
  severity: critical
  description: å¯èƒ½å¯¼è‡´æœåŠ¡å´©æºƒ

- alert: HubLowDiskSpace
  expr: ç£ç›˜ä½¿ç”¨ç‡ > 85%
  for: 10åˆ†é’Ÿ
  severity: critical
  description: æ•°æ®å­˜å‚¨å—å½±å“

# æœåŠ¡å¯ç”¨æ€§ç›‘æ§
- alert: GrafanaServiceDown
  expr: GrafanaæœåŠ¡ä¸å¯ç”¨
  for: 2åˆ†é’Ÿ
  severity: critical
  description: ç›‘æ§èƒ½åŠ›å—æŸ

- alert: GitHubRunnerDown
  expr: CI/CD Runnerç¦»çº¿
  for: 5åˆ†é’Ÿ
  severity: warning
  description: è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸­æ–­
```

#### è®­ç»ƒæœåŠ¡å™¨å‘Šè­¦è§„åˆ™

```yaml
- alert: TrainingHighCPUUsage
  expr: CPUä½¿ç”¨ç‡ > 95%
  for: 3åˆ†é’Ÿ
  severity: critical
  description: å½±å“æ¨¡å‹è®­ç»ƒæ•ˆç‡

- alert: TrainingGPUUnavailable
  expr: GPUæœåŠ¡ä¸å¯ç”¨
  for: 10åˆ†é’Ÿ
  severity: critical
  description: æ·±åº¦å­¦ä¹ è®­ç»ƒä¸­æ–­

- alert: TrainingDiskFull
  expr: ç£ç›˜ä½¿ç”¨ç‡ > 90%
  for: 15åˆ†é’Ÿ
  severity: critical
  description: æ¨¡å‹å­˜å‚¨ç©ºé—´ä¸è¶³
```

#### æ¨ç†æœåŠ¡å™¨å‘Šè­¦è§„åˆ™

```yaml
- alert: InferenceServiceDown
  expr: æ¨ç†æœåŠ¡å®•æœº
  for: 1åˆ†é’Ÿ
  severity: critical
  description: ç”Ÿäº§äº¤æ˜“ç³»ç»Ÿå—å½±å“

- alert: InferenceHighLatency
  expr: å“åº”å»¶è¿Ÿ > 500ms
  for: 2åˆ†é’Ÿ
  severity: critical
  description: å½±å“å®æ—¶äº¤æ˜“å†³ç­–

- alert: InferenceErrorRateHigh
  expr: é”™è¯¯ç‡ > 5%
  for: 3åˆ†é’Ÿ
  severity: critical
  description: äº¤æ˜“å†³ç­–è´¨é‡ä¸‹é™
```

#### ä¸šåŠ¡ååŒå‘Šè­¦è§„åˆ™

```yaml
- alert: StrategyKPIDrop
  expr: Sharpeæ¯”ç‡ < 0.5
  for: 1å°æ—¶
  severity: warning
  description: ç­–ç•¥è¡¨ç°å¼‚å¸¸

- alert: CostOverBudget
  expr: æœˆè´¹ç”¨ > 300å…ƒ
  for: 1å¤©
  severity: warning
  description: æˆæœ¬è¶…é¢„ç®—

- alert: SystemAvailabilityDrop
  expr: å¯ç”¨æ€§ < 99.9%
  for: 1å°æ—¶
  severity: critical
  description: ç³»ç»Ÿç¨³å®šæ€§ä¸‹é™
```

## å‘Šè­¦å“åº”ç­–ç•¥

### 1. å‘Šè­¦çº§åˆ«å®šä¹‰

| çº§åˆ« | é¢œè‰² | å“åº”æ—¶é—´ | å½±å“èŒƒå›´ |
|------|------|----------|----------|
| ğŸ”´ **ä¸¥é‡** | çº¢è‰² | 5åˆ†é’Ÿå†… | ç³»ç»ŸæœåŠ¡ä¸­æ–­ |
| ğŸŸ¡ **è­¦å‘Š** | é»„è‰² | 30åˆ†é’Ÿå†… | æ€§èƒ½ä¸‹é™ |
| ğŸ”µ **ä¿¡æ¯** | è“è‰² | æŒ‰éœ€å¤„ç† | ä¸€èˆ¬é€šçŸ¥ |

### 2. å“åº”æµç¨‹

#### ä¸¥é‡å‘Šè­¦ (Critical)
1. **ç«‹å³å“åº”**: é’‰é’‰@ç›¸å…³äººå‘˜
2. **åŸå› æ’æŸ¥**: æ£€æŸ¥æœåŠ¡çŠ¶æ€
3. **ä¸´æ—¶ä¿®å¤**: é‡å¯æœåŠ¡æˆ–å›æ»š
4. **æ ¹å› åˆ†æ**: è®°å½•å¹¶ä¿®å¤æ ¹æœ¬é—®é¢˜

#### è­¦å‘Šå‘Šè­¦ (Warning)
1. **è®¡åˆ’å“åº”**: å·¥ä½œæ—¶é—´å†…å¤„ç†
2. **ç›‘æ§è§‚å¯Ÿ**: è·Ÿè¸ªæŒ‡æ ‡å˜åŒ–
3. **é¢„é˜²æªæ–½**: è°ƒæ•´èµ„æºé…ç½®
4. **ä¼˜åŒ–æ”¹è¿›**: ç³»ç»Ÿè°ƒä¼˜

### 3. å‘Šè­¦æŠ‘åˆ¶è§„åˆ™

- **é‡å¤å‘Šè­¦æŠ‘åˆ¶**: åŒç±»å‘Šè­¦5åˆ†é’Ÿå†…ä¸é‡å¤å‘é€
- **ä¾èµ–å‘Šè­¦æŠ‘åˆ¶**: ä¸»æœåŠ¡å®•æœºæ—¶æŠ‘åˆ¶ä»å±æœåŠ¡å‘Šè­¦
- **ç»´æŠ¤çª—å£æŠ‘åˆ¶**: ç³»ç»Ÿç»´æŠ¤æœŸé—´å‘Šè­¦é™é»˜

## å‘Šè­¦é…ç½®ç®¡ç†

### 1. Grafanaå‘Šè­¦é…ç½®

#### è”ç³»ç‚¹é…ç½® (Contact Points)
- **é’‰é’‰æœºå™¨äºº**: é…ç½®webhook URL
- **æ¶ˆæ¯æ¨¡æ¿**: è‡ªå®šä¹‰å‘Šè­¦æ ¼å¼
- **å…³é”®è¯è¿‡æ»¤**: ç¡®ä¿æ¶ˆæ¯é€è¾¾

#### å‘Šè­¦è§„åˆ™é…ç½®
- **åˆ†ç»„ç®¡ç†**: æŒ‰æœåŠ¡å™¨å’Œé˜¶æ®µåˆ†ç»„
- **é˜ˆå€¼è®¾ç½®**: åŸºäºä¸šåŠ¡éœ€æ±‚è°ƒæ•´
- **æ—¶é—´çª—å£**: åˆç†è®¾ç½®å‘Šè­¦å»¶è¿Ÿ

### 2. PrometheusæŒ‡æ ‡é…ç½®

#### åŸºç¡€æŒ‡æ ‡
```yaml
# ç³»ç»ŸæŒ‡æ ‡
- node_cpu_usage
- node_memory_usage
- node_disk_usage
- node_network_io

# æœåŠ¡æŒ‡æ ‡
- service_up_status
- service_response_time
- service_error_rate
- service_request_count
```

#### ä¸šåŠ¡æŒ‡æ ‡
```yaml
# é‡åŒ–ç­–ç•¥æŒ‡æ ‡
- strategy_sharpe_ratio
- strategy_win_rate
- strategy_profit_loss
- strategy_max_drawdown

# ç³»ç»ŸæŒ‡æ ‡
- system_availability
- system_cost_monthly
- system_performance_score
```

## å®æ–½å»ºè®®

### 1. åˆ†é˜¶æ®µå®æ–½

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç›‘æ§
- éƒ¨ç½²ç³»ç»Ÿèµ„æºå‘Šè­¦
- é…ç½®æœåŠ¡å¯ç”¨æ€§ç›‘æ§
- æµ‹è¯•é’‰é’‰å‘Šè­¦é€šé“

#### ç¬¬äºŒé˜¶æ®µï¼šä¸šåŠ¡ç›‘æ§
- æ·»åŠ KPIæŒ‡æ ‡ç›‘æ§
- é…ç½®ä¸šåŠ¡é€»è¾‘å‘Šè­¦
- ä¼˜åŒ–å‘Šè­¦é˜ˆå€¼

#### ç¬¬ä¸‰é˜¶æ®µï¼šæ™ºèƒ½è¿ç»´
- å®ç°å‘Šè­¦è‡ªåŠ¨å¤„ç†
- é…ç½®å‘Šè­¦è¶‹åŠ¿åˆ†æ
- å»ºç«‹å‘Šè­¦çŸ¥è¯†åº“

### 2. æœ€ä½³å®è·µ

#### å‘Šè­¦è®¾è®¡åŸåˆ™
- **å‡†ç¡®æ€§**: å‡å°‘è¯¯æŠ¥ï¼Œæé«˜ç²¾å‡†åº¦
- **åŠæ—¶æ€§**: å…³é”®é—®é¢˜å¿«é€Ÿå‘ç°
- **å¯æ“ä½œæ€§**: å‘Šè­¦ä¿¡æ¯åŒ…å«è§£å†³å»ºè®®
- **å±‚æ¬¡åŒ–**: åˆ†å±‚å¤„ç†ä¸åŒçº§åˆ«å‘Šè­¦

#### ç»´æŠ¤å»ºè®®
- **å®šæœŸreview**: æ¯æœˆæ£€æŸ¥å‘Šè­¦è§„åˆ™æœ‰æ•ˆæ€§
- **é˜ˆå€¼ä¼˜åŒ–**: åŸºäºå†å²æ•°æ®è°ƒæ•´é˜ˆå€¼
- **çŸ¥è¯†ç§¯ç´¯**: å»ºç«‹å‘Šè­¦å¤„ç†çŸ¥è¯†åº“
- **è‡ªåŠ¨åŒ–**: å®ç°å‘Šè­¦çš„è‡ªåŠ¨å¤„ç†

## ç›‘æ§é¢æ¿å»ºè®®

### Grafana Dashboardè®¾è®¡

#### æ€»è§ˆé¢æ¿
- ç³»ç»ŸçŠ¶æ€æ¦‚è§ˆ
- å…³é”®æŒ‡æ ‡è¶‹åŠ¿
- å‘Šè­¦çŠ¶æ€æ±‡æ€»

#### æœåŠ¡å™¨ä¸“é¡¹é¢æ¿
- ä¸­æ¢æœåŠ¡å™¨: å¼€å‘ç¯å¢ƒã€æ•°æ®æœåŠ¡ã€CI/CDçŠ¶æ€
- è®­ç»ƒæœåŠ¡å™¨: GPUåˆ©ç”¨ç‡ã€è®­ç»ƒè¿›åº¦ã€æ¨¡å‹çŠ¶æ€
- æ¨ç†æœåŠ¡å™¨: å“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€QPS

#### ä¸šåŠ¡æŒ‡æ ‡é¢æ¿
- ç­–ç•¥è¡¨ç°: Sharpeæ¯”ç‡ã€èƒœç‡ã€æ”¶ç›Šæ›²çº¿
- ç³»ç»Ÿæ•ˆç‡: å¯ç”¨æ€§ã€å»¶è¿Ÿã€æˆæœ¬åˆ†æ
- å‘Šè­¦åˆ†æ: å‘Šè­¦è¶‹åŠ¿ã€å“åº”æ—¶é—´ã€è§£å†³ç‡

## æ€»ç»“

è¿™ä¸ªå‘Šè­¦è§„åˆ™ä½“ç³»è®¾è®¡å……åˆ†ç»“åˆäº†å·¥ä½œåŒºçš„éƒ¨ç½²æˆ˜ç•¥ï¼Œå®ç°äº†ï¼š

1. **åˆ†å±‚ç›‘æ§**: ä»åŸºç¡€è®¾æ–½åˆ°ä¸šåŠ¡çš„å…¨é¢è¦†ç›–
2. **é˜¶æ®µååŒ**: ä¸éƒ¨ç½²æˆ˜ç•¥åŒæ­¥æ¨è¿›
3. **æ™ºèƒ½å‘Šè­¦**: é’‰é’‰å®æ—¶é€šçŸ¥ï¼Œå…³é”®è¯è¿‡æ»¤ç¡®ä¿é€è¾¾
4. **å“åº”ä¼˜åŒ–**: åˆ†çº§å¤„ç†ï¼Œæé«˜è¿ç»´æ•ˆç‡
5. **æŒç»­æ”¹è¿›**: å®šæœŸä¼˜åŒ–ï¼ŒçŸ¥è¯†ç§¯ç´¯

é€šè¿‡è¿™ä¸ªä½“ç³»ï¼Œæ‚¨å¯ä»¥å®ç°MT5 Hubç³»ç»Ÿçš„ä¸»åŠ¨ç›‘æ§ï¼Œç¡®ä¿é‡åŒ–äº¤æ˜“ç³»ç»Ÿçš„ç¨³å®šã€é«˜æ•ˆè¿è¡Œï¼ğŸš€ğŸ“Š
