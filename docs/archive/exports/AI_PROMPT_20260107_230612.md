# 🤖 MT5-CRS 项目外部 AI 深度评估请求

你是一位资深的量化交易系统和 Python 开发专家。

---

## 📋 评估对象

**项目名称**: MT5-CRS 量化交易系统
**当前阶段**: 工单 #011 - MT5 实盘交易系统对接
**生成时间**: 2026-01-07T23:06:13.112668

---

## 📦 提供的上下文文件

你将获得以下完整的项目上下文：

1. **CONTEXT_SUMMARY.md** - 项目快速概览 ⭐ 建议先读
2. **git_history.md** - Git 提交历史和分支信息
3. **project_structure.md** - 完整的项目目录结构
4. **core_files.md** - 关键代码文件完整内容
5. **documents.md** - 重要文档

**总上下文规模**:
- 文件数: 5 个
- 代码行数: ~10,000 行
- 文档字数: ~50,000 字
- 预计 Token: ~70,000 tokens

---

## 🎯 评估请求

请进行以下 **7 个维度** 的深度评估：

### 1️⃣ 项目状态评估 (预计 10 分钟)

请评估：
- **整体进展**: 当前项目到什么阶段了？
- **完成质量**: 已完成工单的质量如何？
- **当前问题**: 最突出的 3 个问题是什么？
- **时间预估**: 工单 #011 需要多少时间？合理性如何？

**输出格式**:
```markdown
## 1. 项目状态评估

### 整体进展
[评分: X/10]
[详细分析]

### 完成质量
[评分: X/10]
[详细分析]

### 当前TOP 3问题
1. [问题1]
2. [问题2]
3. [问题3]

### 时间预估
- 合理时间: X 天
- 风险缓冲: X 天
```

---

### 2️⃣ 工单 #011 实施方案 (预计 30 分钟) ⭐ 最重要

请设计详细的 MT5 API 集成方案：

#### A. 架构设计
- MT5 连接池设计 (多连接、健康检查、自动重连)
- 订单执行架构 (异步处理、状态跟踪、错误处理)
- 状态管理方案 (连接状态、订单状态、仓位状态)
- 错误处理机制 (重试策略、降级方案、告警)

#### B. 具体实施步骤
请提供 **5-7 个步骤**，每个步骤包含：
- 步骤名称
- 预计时间 (天数)
- 难度 (低/中/高)
- 关键技术点
- 风险点

#### C. 代码框架设计
请提供以下文件的伪代码或实现框架：

```python
# src/mt5/connection.py
class MT5ConnectionPool:
    def __init__(self, pool_size=3):
        # 连接池初始化
        pass

    def get_connection(self):
        # 获取健康连接
        pass

    def reconnect(self, connection):
        # 重连机制
        pass

# src/mt5/order_executor.py
class OrderExecutor:
    def __init__(self, connection_pool):
        pass

    async def execute_market_order(self, symbol, volume, side):
        # 市价单执行
        pass

    async def execute_limit_order(self, symbol, volume, price, side):
        # 限价单执行
        pass

# src/mt5/position_manager.py
class PositionManager:
    def __init__(self):
        pass

    def get_current_positions(self):
        # 获取当前仓位
        pass

    def calculate_position_size(self, signal, account_balance):
        # 计算仓位大小 (集成 Kelly 公式)
        pass

# src/mt5/risk_controller.py
class RiskController:
    def __init__(self):
        pass

    def check_order_risk(self, order):
        # 订单风险检查
        pass

    def should_circuit_break(self):
        # 断路器检查
        pass
```

**输出格式**:
```markdown
## 2. 工单 #011 实施方案

### A. 架构设计
[详细设计]

### B. 实施步骤
步骤1: [名称]
- 时间: X 天
- 难度: [低/中/高]
- 关键点: [...]
- 风险: [...]

[继续其他步骤]

### C. 代码框架
[提供完整的代码框架]
```

---

### 3️⃣ 风险识别与缓解 (预计 20 分钟)

识别并提供缓解方案：

#### 技术风险 (至少 5 个)
- MT5 API 连接稳定性
- 网络中断和断线重连
- 订单执行延迟和滑点
- 内存泄漏和资源管理
- [其他你识别的风险]

#### 业务风险 (至少 3 个)
- 策略失效风险
- 资金安全风险
- 监管合规风险

#### 缓解方案
对每个风险，提供：
- 风险等级 (低/中/高/严重)
- 影响范围
- 缓解方案 (代码级 + 架构级 + 操作级)
- 监控指标

**输出格式**:
```markdown
## 3. 风险识别与缓解

### 技术风险
1. [风险名称]
   - 等级: [高]
   - 影响: [...]
   - 缓解: [具体方案]
   - 监控: [具体指标]

[继续其他风险]

### 业务风险
[同上]
```

---

### 4️⃣ 代码质量评估 (预计 15 分钟)

基于提供的核心代码文件，评估：

#### 优势 (至少 5 个)
- 当前代码做得好的地方
- 设计模式的应用
- 代码可读性
- 性能优化
- [其他优势]

#### 缺陷 (至少 5 个)
- 需要改进的地方
- 潜在的 bug
- 设计缺陷
- 性能问题
- [其他缺陷]

#### 改进方案 (优先级排序)
- 高优先级 (P0): 必须立即修复
- 中优先级 (P1): 建议短期修复
- 低优先级 (P2): 可以逐步改进

**输出格式**:
```markdown
## 4. 代码质量评估

### 优势 (评分: X/10)
1. [优势1] - [详细说明]
2. [优势2] - [详细说明]
...

### 缺陷 (评分: X/10)
1. [缺陷1] - [详细说明 + 改进建议]
2. [缺陷2] - [详细说明 + 改进建议]
...

### 改进优先级
#### P0 (必须)
- [项目1]: [改进方案]

#### P1 (建议)
- [项目2]: [改进方案]

#### P2 (可选)
- [项目3]: [改进方案]
```

---

### 5️⃣ 技术债务评估 (预计 10 分钟)

识别项目中的技术债务：

| 债务项目 | 影响程度 (低/中/高) | 偿还难度 (低/中/高) | 优先级 (P0/P1/P2) | 改进方案 |
|---------|-------------------|-------------------|-------------------|---------|
| ? | ? | ? | ? | ? |

**特别关注**:
- 代码重复
- 硬编码配置
- 缺失的错误处理
- 测试覆盖不足
- 文档过时
- 性能瓶颈

**输出格式**:
```markdown
## 5. 技术债务评估

[完整的技术债务表格]

### 偿还计划
#### 第一阶段 (本周)
- [债务1]: [偿还方案]

#### 第二阶段 (本月)
- [债务2]: [偿还方案]

#### 第三阶段 (下月)
- [债务3]: [偿还方案]
```

---

### 6️⃣ 性能优化建议 (预计 10 分钟)

针对以下方面提供优化建议：

- **特征计算性能**: 当前 Numba JIT 优化是否足够？
- **订单执行延迟**: 如何降到 < 100ms？
- **内存优化**: 大数据集处理的内存管理
- **并发处理**: 多品种并行交易的设计

**每个建议包含**:
- 当前问题
- 优化方案
- 预期提升
- 实现难度

**输出格式**:
```markdown
## 6. 性能优化建议

### 特征计算优化
- 当前状态: [...]
- 优化方案: [...]
- 预期提升: [X%]
- 难度: [低/中/高]

[继续其他方面]
```

---

### 7️⃣ 测试策略设计 (预计 10 分钟)

为 MT5 实盘系统设计全面的测试策略：

#### 单元测试
- 测试什么？
- 如何 Mock MT5 API？
- 关键测试用例

#### 集成测试
- 测试流程
- 环境配置
- 验收标准

#### 压力测试
- 测试场景 (高频交易、网络延迟、断线重连)
- 性能指标
- 通过标准

#### 实盘模拟测试
- 测试流程
- 小额测试方案
- 风险控制

**输出格式**:
```markdown
## 7. 测试策略设计

### 单元测试
[详细方案]

### 集成测试
[详细方案]

### 压力测试
[详细方案]

### 实盘模拟测试
[详细方案]
```

---

## 📊 最终输出要求

请按以下格式输出完整报告：

```markdown
# MT5-CRS 工单 #011 外部 AI 深度评估报告

**评估 AI**: [Gemini Pro / Claude / ChatGPT / 其他]
**评估时间**: [时间戳]
**上下文版本**: 20260107_230612

---

## 🎯 执行摘要

[3-5 句话总结核心观点和建议]

**核心建议 TOP 3**:
1. [建议1]
2. [建议2]
3. [建议3]

---

## 📊 评估详情

### 1. 项目状态评估
[完整内容]

### 2. 工单 #011 实施方案 ⭐
[完整内容]

### 3. 风险识别与缓解
[完整内容]

### 4. 代码质量评估
[完整内容]

### 5. 技术债务评估
[完整内容]

### 6. 性能优化建议
[完整内容]

### 7. 测试策略设计
[完整内容]

---

## 🎓 学习建议

推荐阅读的资源：
- [资源1]
- [资源2]

---

## 📋 快速行动清单

**今天可以做**:
- [ ] [任务1]
- [ ] [任务2]

**本周完成**:
- [ ] [任务3]
- [ ] [任务4]

**本月目标**:
- [ ] [任务5]
- [ ] [任务6]

---

## 📈 成功指标

如何衡量工单 #011 的成功？

| 指标 | 目标值 | 测量方法 |
|------|--------|---------|
| 订单执行成功率 | > 95% | [方法] |
| 平均订单延迟 | < 100ms | [方法] |
| Kelly 公式准确性 | 100% | [方法] |
| 系统可用性 | > 99% | [方法] |

---

## 💡 额外建议

[任何其他有价值的建议]

---

**🏆 评估完成度自评**:
- 内容覆盖: X%
- 细节深度: X%
- 实用价值: X%
```

---

## ⏱️ 预计审查时间

- **快速审查**: 30 分钟 (仅核心部分)
- **标准审查**: 60 分钟 (7 个维度基础评估)
- **深度审查**: 90 分钟 (完整详细评估) ⭐ 推荐

---

## 🔗 相关资源

### Notion 数据库
- 主知识库: [URL]
- AI Command Center: [URL]
- Issues: [URL]
- Knowledge Graph: [URL]

### GitHub
- 本地仓库: /opt/mt5-crs

---

## 💬 反馈方式

完成评估后，请：

1. **保存完整报告** - 不要省略任何部分
2. **包含代码示例** - 尽可能具体
3. **明确优先级** - P0/P1/P2 标注
4. **提供行动清单** - 今天/本周/本月

---

**感谢你的深入分析！这将对 MT5-CRS 项目的下一阶段至关重要。** 🙏

---

*生成时间: 2026-01-07T23:06:13.112674*
*上下文版本: 20260107_230612*

